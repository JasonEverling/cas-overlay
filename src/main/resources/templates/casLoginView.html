<!DOCTYPE html>
<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="~{layout}">
<head>
    <title th:text="#{cas.login.pagetitle}"></title>
</head>
<body id="cas" class="login">
<div layout:fragment="content">
    <h2>
        <div id="logo"></div>
    </h2>
    <form method="post" id="fm1" onsubmit="return cleanUsername()" th:object="${credential}" autocomplete="off">
        <div class="alert alert-danger" th:if="${#fields.hasErrors('*')}">
            <span th:each="err : ${#fields.errors('*')}" th:utext="${err}"/>
        </div>
        <fieldset id="inputarea">
            <div id="signin" class="row">
                <h1>Sign In</h1>
            </div>
            <div id="fields">
                <div class="row">
                    <label for="username" th:utext="#{screen.welcome.label.netid}"/>
                    <div th:if="${openIdLocalId}">
                        <strong>
                            <span th:utext="${openIdLocalId}"/>
                        </strong>
                        <input type="hidden" id="username" name="username" th:value="${openIdLocalId}"/>
                    </div>
                    <div th:unless="${openIdLocalId}">
                        <input class="required" id="username" size="25" tabindex="1" type="text" th:field="*{username}" th:accesskey="#{screen.welcome.label.netid.accesskey}" autocomplete="off"/>
                    </div>
                    <a href="https://idm.bshp.edu/pwm/public/forgottenusername">Forgot Username?</a>
                </div>
                <div class="row">
                    <label for="password" th:utext="#{screen.welcome.label.password}"/>
                    <div>
                        <input class="required" type="password" id="password" size="25" tabindex="2" th:accesskey="#{screen.welcome.label.password.accesskey}" th:field="*{password}" autocomplete="off"/>
                        <span id="capslock-on" style="display:none;">
                            <p>
                                <i class="fa fa-exclamation-circle"></i>
                                <span th:utext="#{screen.capslock.on}"/>
                            </p>
                        </span>
                    </div>
                    <a href="https://idm.bshp.edu/pwm/public/forgottenpassword">Forgot Password?</a>
                </div>
                <div class="row check">
                    <input id="publicWorkstation" name="publicWorkstation" value="false" tabindex="3" type="checkbox" />
                    <label for="publicWorkstation">I am using a public device</label>
                </div>
                <input type="hidden" name="execution" th:value="${flowExecutionKey}"/>
                <input type="hidden" name="_eventId" value="submit"/>
                <input type="hidden" name="geolocation"/>
                <input class="btn btn-submit btn-block" name="submit" accesskey="l" th:value="#{screen.welcome.button.login}" tabindex="4" type="submit"/>
            </div>
            <div id="helpers">
                <a href="http://www.bshp.edu/current-students/information-technology/getting-started">New? Get Started</a>
                <br>
                <br>
                <a href="https://idm.bshp.edu/pwm/public/ForgottenPassword?">Account Locked?</a>
                <br>
            </div>
        </fieldset>
    </form>
    <div id="recovery">
        <div class="row">
            <p>Don't lose access to your account!<br><a href="https://idm.bshp.edu/pwm">Update your recovery options</a></p>
        </div>
    </div>
    <div id="notice" class="content">
        <div id="notice-icon"></div>
        <p>
            <strong>Notice:</strong>
            This service and the services to which it provides access are for authorized use only.
            Any attempt to gain unauthorized access, or exceed authorized access will be pursued, as applicable, under campus codes and state or federal law.
        </p>
        <p>For security reasons, please Log Out and Exit your web browser when you are done!</p>
    </div>
    <div id="powered-by" class="powered-by">
        <div id="copyright">
            <p>Central Authentication Service</p>
        </div>
    </div>
    <script type="text/javascript" th:inline="javascript">
        var i = [[#{screen.welcome.button.loginwip}]]
        $("#fm1").submit(function() {
            $(":submit").attr("disabled", true);
            $(":submit").attr("value", i);
            return true;
        });
    </script>
    <script type="text/javascript">
        if (!String.prototype.trim) {
            (function() {
                var rtrim = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;
                String.prototype.trim = function() {
                    return this.replace(rtrim, '');
                };
            })();
        }
        var cleanUsername = function() {
            var usernameElement = document.getElementById('username');
            usernameElement.value = usernameElement.value.trim().toLowerCase();
            return true;
        };
    </script>
</div>
</body>
</html>
